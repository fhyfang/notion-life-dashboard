import{j as e,m as z}from"./motion-Nujmgg1Y.js";import{r as j}from"./vendor-DJ1oPbzn.js";import{g as x}from"./dataLoader-oWN11X4O.js";import{j as q,b as G,k as J}from"./icons-CYvmV9N1.js";import{R as Q,P as V,e as X,f as Z,T as ee}from"./charts-Cp_LfCcJ.js";const C=r=>(r==null?void 0:r.map(i=>i.plain_text).join(""))||"",te=r=>{r=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate())),r.setUTCDate(r.getUTCDate()+4-(r.getUTCDay()||7));const i=new Date(Date.UTC(r.getUTCFullYear(),0,1));return Math.ceil(((r.getTime()-i.getTime())/864e5+1)/7)},se=()=>{const r=new Date,i=new Date(r.getFullYear(),r.getMonth(),r.getDate()),d=i.getDay(),p=new Date(i);p.setDate(i.getDate()-d-7);const h=new Date(i);return h.setDate(i.getDate()-d-1),h.setHours(23,59,59,999),{start:p,end:h}},w=({title:r,children:i,icon:d,color:p})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 h-full",children:[e.jsxs("div",{className:`flex items-center mb-3 ${p}`,children:[e.jsx(d,{className:"w-5 h-5 mr-2"}),e.jsx("h3",{className:"text-md font-bold",children:r})]}),i]}),W=["#0088FE","#00C49F","#FFBB28","#FF8042","#AF19FF"],ie=()=>{var N,D,y,v,F;const[r,i]=j.useState({}),[d,p]=j.useState(!0),h=new Date,E=h.getFullYear(),S=te(h)-1;return j.useEffect(()=>{(async()=>{p(!0);const{start:c,end:m}=se(),[A,T,R,O,U,K,L]=await Promise.all([x("å¥åº·æ—¥è®°"),x("æƒ…ç»ªè®°å½•"),x("æ¯æ—¥æ—¥å¿—"),x("è¡ŒåŠ¨åº“"),x("è´¢åŠ¡è®°å½•"),x("çŸ¥è¯†åº“"),x("äº’åŠ¨è®°å½•")]),g=A.filter(t=>{var s,a,n,o;return new Date((a=(s=t.properties.æ—¥æœŸ)==null?void 0:s.date)==null?void 0:a.start)>=c&&new Date((o=(n=t.properties.æ—¥æœŸ)==null?void 0:n.date)==null?void 0:o.start)<=m}),k=T.filter(t=>{var s,a,n,o;return new Date((a=(s=t.properties.æ—¥æœŸ)==null?void 0:s.date)==null?void 0:a.start)>=c&&new Date((o=(n=t.properties.æ—¥æœŸ)==null?void 0:n.date)==null?void 0:o.start)<=m}),P=R.filter(t=>{var s,a,n,o;return new Date((a=(s=t.properties.æ—¥æœŸ)==null?void 0:s.date)==null?void 0:a.start)>=c&&new Date((o=(n=t.properties.æ—¥æœŸ)==null?void 0:n.date)==null?void 0:o.start)<=m}),Y=O.filter(t=>{var s,a,n,o,l,u;return((a=(s=t.properties.å®Œæˆæ—¥æœŸ)==null?void 0:s.date)==null?void 0:a.start)&&new Date((o=(n=t.properties.å®Œæˆæ—¥æœŸ)==null?void 0:n.date)==null?void 0:o.start)>=c&&new Date((u=(l=t.properties.å®Œæˆæ—¥æœŸ)==null?void 0:l.date)==null?void 0:u.start)<=m}),M=U.filter(t=>{var s,a,n,o;return new Date((a=(s=t.properties.æ—¥æœŸ)==null?void 0:s.date)==null?void 0:a.start)>=c&&new Date((o=(n=t.properties.æ—¥æœŸ)==null?void 0:n.date)==null?void 0:o.start)<=m}),$=K.filter(t=>new Date(t.created_time)>=c&&new Date(t.created_time)<=m),I=L.filter(t=>{var s,a,n,o;return new Date((a=(s=t.properties.æ—¥æœŸ)==null?void 0:s.date)==null?void 0:a.start)>=c&&new Date((o=(n=t.properties.æ—¥æœŸ)==null?void 0:n.date)==null?void 0:o.start)<=m}),_=g.reduce((t,s)=>{var a;return t+(((a=s.properties.ç¡çœ æ—¶é•¿)==null?void 0:a.number)||0)},0)/(g.length||1)/60,B=new Set(g.filter(t=>{var s;return(((s=t.properties.è¿åŠ¨æ—¶é•¿)==null?void 0:s.number)||0)>0}).map(t=>{var s,a;return(a=(s=t.properties.æ—¥æœŸ)==null?void 0:s.date)==null?void 0:a.start})).size,b={};P.forEach(t=>{var n,o,l,u;const s=((o=(n=t.properties.æ´»åŠ¨ç±»åˆ«)==null?void 0:n.select)==null?void 0:o.name)||"æœªåˆ†ç±»",a=((u=(l=t.properties["å®é™…æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰"])==null?void 0:l.formula)==null?void 0:u.number)||0;b[s]=(b[s]||0)+a});const H=M.reduce((t,s)=>{var n,o,l;const a=((n=s.properties.é‡‘é¢)==null?void 0:n.number)||0;return((l=(o=s.properties.ç±»å‹)==null?void 0:o.select)==null?void 0:l.name)==="æ”¶å…¥"?t+a:t-a},0);i({avgSleep:_.toFixed(1),exerciseDays:B,avgEnergy:(g.reduce((t,s)=>{var a,n;return t+(((n=(a=s.properties.ç²¾åŠ›æ°´å¹³)==null?void 0:a.formula)==null?void 0:n.number)||0)},0)/(g.length||1)).toFixed(0),moodExtremes:{high:k.sort((t,s)=>{var a,n,o,l;return(((n=(a=s.properties.å½“å‰å¿ƒæƒ…è¯„åˆ†)==null?void 0:a.select)==null?void 0:n.name)||"0").localeCompare(((l=(o=t.properties.å½“å‰å¿ƒæƒ…è¯„åˆ†)==null?void 0:o.select)==null?void 0:l.name)||"0")})[0],low:k.sort((t,s)=>{var a,n,o,l;return(((n=(a=t.properties.å½“å‰å¿ƒæƒ…è¯„åˆ†)==null?void 0:a.select)==null?void 0:n.name)||"0").localeCompare(((l=(o=s.properties.å½“å‰å¿ƒæƒ…è¯„åˆ†)==null?void 0:o.select)==null?void 0:l.name)||"0")})[0]},timeAllocation:Object.entries(b).map(([t,s])=>({name:t,value:Math.round(s/60)})),actionsCompleted:Y.length,netFinancial:H.toFixed(2),newKnowledge:$.length,importantInteractions:I.length}),p(!1)})()},[]),d?e.jsx("div",{className:"text-center p-8",children:"ç”Ÿæˆå‘¨åº¦å¤ç›˜æŠ¥å‘Šä¸­..."}):e.jsxs(z.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-800",children:[E," W",S," - æ¯å‘¨å›é¡¾ä¸è§„åˆ’"]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-4",children:"ç¬¬ä¸€éƒ¨åˆ†ï¼šä¸Šå‘¨æ•°æ®å¿«ç…§"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(w,{title:"åŸºåº§ä¸èƒ½é‡",icon:q,color:"text-blue-600",children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("p",{children:["å¹³å‡ç¡çœ : ",e.jsxs("span",{className:"font-bold",children:[r.avgSleep,"h"]})]}),e.jsxs("p",{children:["è¿åŠ¨å¤©æ•°: ",e.jsxs("span",{className:"font-bold",children:[r.exerciseDays," å¤©"]})]}),e.jsxs("p",{children:["å¹³å‡ç²¾åŠ›: ",e.jsxs("span",{className:"font-bold",children:[r.avgEnergy,"/100"]})]}),e.jsxs("p",{className:"border-t pt-2 mt-2",children:["é«˜å…‰æƒ…ç»ª: ",e.jsx("span",{className:"font-semibold",children:((N=r.moodExtremes)==null?void 0:N.high)&&C((D=r.moodExtremes.high.properties.è®°å½•æ ‡é¢˜)==null?void 0:D.title)})]}),e.jsxs("p",{children:["ä½è°·æƒ…ç»ª: ",e.jsx("span",{className:"font-semibold",children:((y=r.moodExtremes)==null?void 0:y.low)&&C((v=r.moodExtremes.low.properties.è®°å½•æ ‡é¢˜)==null?void 0:v.title)})]})]})}),e.jsxs(w,{title:"æ—¶é—´ä¸ç›®æ ‡æŠ•å…¥",icon:G,color:"text-green-600",children:[e.jsx(Q,{width:"100%",height:150,children:e.jsxs(V,{children:[e.jsx(X,{data:r.timeAllocation,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:30,outerRadius:50,paddingAngle:5,children:(F=r.timeAllocation)==null?void 0:F.map((f,c)=>e.jsx(Z,{fill:W[c%W.length]},`cell-${c}`))}),e.jsx(ee,{formatter:f=>`${f} å°æ—¶`})]})}),e.jsxs("p",{className:"text-center text-sm mt-2",children:["å·²å®Œæˆè¡ŒåŠ¨: ",e.jsx("span",{className:"font-bold",children:r.actionsCompleted})," é¡¹"]})]}),e.jsx(w,{title:"æ æ†ä¸èµ„æºç§¯ç´¯",icon:J,color:"text-purple-600",children:e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("p",{children:["æœ¬å‘¨å‡€æ”¶æ”¯: ",e.jsxs("span",{className:`font-bold ${r.netFinancial>0?"text-green-600":"text-red-600"}`,children:["Â¥",r.netFinancial]})]}),e.jsxs("p",{children:["æ–°å¢çŸ¥è¯†ç‚¹: ",e.jsx("span",{className:"font-bold",children:r.newKnowledge})," ä¸ª"]}),e.jsxs("p",{children:["é‡è¦äº’åŠ¨: ",e.jsx("span",{className:"font-bold",children:r.importantInteractions})," æ¬¡"]})]})})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-4",children:"ç¬¬äºŒéƒ¨åˆ†ï¼šæ´å¯Ÿä¸åæ€ (So What?)"}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-green-600 mb-2",children:"âœ… æœ¬å‘¨æˆå°± (Wins)"}),e.jsx("textarea",{className:"w-full h-32 p-2 border rounded bg-green-50 border-green-200 focus:ring-green-500 focus:border-green-500",placeholder:"è®°å½•ä¸‹è®©ä½ æ„Ÿåˆ°è‡ªè±ªçš„äº‹æƒ…ï¼Œæ— è®ºå¤§å°..."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-red-600 mb-2",children:"ğŸ¤” æœ¬å‘¨æŒ‘æˆ˜ (Challenges)"}),e.jsx("textarea",{className:"w-full h-32 p-2 border rounded bg-red-50 border-red-200 focus:ring-red-500 focus:border-red-500",placeholder:"é‡åˆ°äº†å“ªäº›å›°éš¾ï¼Ÿå“ªäº›äº‹æƒ…æ²¡æœ‰æŒ‰è®¡åˆ’è¿›è¡Œï¼Ÿ"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("h3",{className:"font-bold text-yellow-600 mb-2",children:"ğŸ’¡ æ ¸å¿ƒæ´å¯Ÿ (Key Learnings)"}),e.jsx("textarea",{className:"w-full h-24 p-2 border rounded bg-yellow-50 border-yellow-200 focus:ring-yellow-500 focus:border-yellow-500",placeholder:"ä»æœ¬å‘¨çš„ç»å†ä¸­å­¦åˆ°äº†ä»€ä¹ˆæœ€é‡è¦çš„æ•™è®­ï¼Ÿ"})]})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-700 mb-4",children:"ç¬¬ä¸‰éƒ¨åˆ†ï¼šä¸‹å‘¨è§„åˆ’ (Now What?)"}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h3",{className:"font-bold text-blue-600 mb-2",children:"ğŸ¯ ä¸‹å‘¨ä¸‰å¤§èšç„¦ (Top 3 Focus Areas)"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",className:"w-full p-2 border rounded focus:ring-blue-500 focus:border-blue-500",placeholder:"1. "}),e.jsx("input",{type:"text",className:"w-full p-2 border rounded focus:ring-blue-500 focus:border-blue-500",placeholder:"2. "}),e.jsx("input",{type:"text",className:"w-full p-2 border rounded focus:ring-blue-500 focus:border-blue-500",placeholder:"3. "})]})]})]})]})};export{ie as default};
