import{j as e,m as u}from"./motion-CtNUML8-.js";import{r as f}from"./vendor-DJ1oPbzn.js";import{g as w}from"./index-B9mZRE9N.js";import{F as v}from"./icons-CbvDa_dU.js";const $=()=>{const[y,j]=f.useState([]);return f.useEffect(()=>{(async()=>{const r=await w("目标库"),l=new Date().getFullYear(),b=Math.floor((new Date().getMonth()+3)/3),N=r.filter(t=>{var n,i;const a=(i=(n=t.properties.时间跨度)==null?void 0:n.select)==null?void 0:i.name;return a===`${l}年`||a===`${l}Q${b}`||a==="本年"||a==="本季"}).map(t=>{var o,d,c,m,x,p,h,g;const a=((d=(o=t.properties.截止日期)==null?void 0:o.date)==null?void 0:d.start)||"",n=a?Math.ceil((new Date(a).getTime()-new Date().getTime())/(1e3*3600*24)):0,i=((m=(c=t.properties.目标进度)==null?void 0:c.rollup)==null?void 0:m.number)||0;return{name:((p=(x=t.properties.理想状态)==null?void 0:x.title[0])==null?void 0:p.plain_text)||"未命名目标",progress:Math.round(i*100)||0,deadline:a,remainingDays:Math.max(0,n),timeSpan:((g=(h=t.properties.时间跨度)==null?void 0:h.select)==null?void 0:g.name)||""}});j(N)})()},[]),e.jsxs("div",{className:"w-full bg-white shadow-lg rounded-2xl p-8",children:[e.jsxs("div",{className:"flex items-center justify-center mb-8",children:[e.jsx(v,{className:"w-6 h-6 text-amber-600 mr-3"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"目标系统"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:y.map((s,r)=>e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:r*.1},className:"bg-gray-50 rounded-xl p-6 hover:shadow-md transition-all duration-300 border border-gray-100",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-semibold text-gray-800 text-lg overflow-hidden",children:s.name}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"进度"}),e.jsxs("span",{className:"text-lg font-bold text-amber-600",children:[s.progress,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:e.jsx(u.div,{className:"bg-gradient-to-r from-amber-400 to-amber-600 h-3 rounded-full",initial:{width:0},animate:{width:`${s.progress}%`},transition:{duration:1,ease:"easeOut"}})})]}),e.jsx("div",{className:"pt-3 border-t border-gray-200",children:e.jsx("div",{className:"text-sm text-gray-600",children:s.deadline&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"block",children:["截止: ",new Date(s.deadline).toLocaleDateString("zh-CN")]}),e.jsx("span",{className:"block font-medium text-gray-800",children:s.remainingDays>0?`剩余 ${s.remainingDays} 天`:"已过期"})]})})})]})},r))})]})};export{$ as default};
