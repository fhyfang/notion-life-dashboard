import{j as e,m as U}from"./motion-Nujmgg1Y.js";import{r as i}from"./vendor-DJ1oPbzn.js";import{g as c}from"./dataLoader-oWN11X4O.js";import{l as C,m as G,T as L,b as X}from"./icons-CYvmV9N1.js";import{R as d,i as Y,j as _,k as F,l as T,m as $,T as m,d as b,b as y,X as k,Y as D,c as q,B as w}from"./charts-Cp_LfCcJ.js";const H=o=>(o==null?void 0:o.map(l=>l.plain_text).join(""))||"",n=({title:o,children:l,icon:x,color:h})=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 h-full",children:[e.jsxs("div",{className:`flex items-center mb-4 ${h}`,children:[e.jsx(x,{className:"w-6 h-6 mr-3"}),e.jsx("h3",{className:"text-lg font-bold",children:o})]}),l]}),ee=()=>{const[o,l]=i.useState([]),[x,h]=i.useState([]),[A,S]=i.useState([]),[v,E]=i.useState([]),[M,N]=i.useState(!0);return i.useEffect(()=>{(async()=>{N(!0);const[K,R,O,B]=await Promise.all([c("知识库"),c("注意力记录"),c("思维模型"),c("每日日志")]),j={};K.forEach(t=>{var a,r;const s=(r=(a=t.properties.知识领域)==null?void 0:a.select)==null?void 0:r.name;s&&(j[s]=(j[s]||0)+1)}),l(Object.entries(j).map(([t,s])=>({subject:t,count:s,fullMark:10})));const P=["了解","理解","应用","分析","评估","创造"],p={};K.forEach(t=>{var a,r;const s=(r=(a=t.properties.理解深度)==null?void 0:a.select)==null?void 0:r.name;s&&(p[s]=(p[s]||0)+1)}),h(P.map(t=>({name:t,count:p[t]||0})));const g={};R.forEach(t=>{var a;(((a=t.properties.干扰类型)==null?void 0:a.multi_select)||[]).forEach(r=>{g[r.name]=(g[r.name]||0)+1})}),S(Object.entries(g).map(([t,s])=>({name:t,count:s})));const z=new Map(O.map(t=>{var s;return[t.id,H((s=t.properties.模型名称)==null?void 0:s.title)]})),f={};B.forEach(t=>{var a;(((a=t.properties.关联模型)==null?void 0:a.relation)||[]).forEach(r=>{const u=z.get(r.id);u&&(f[u]=(f[u]||0)+1)})}),E(Object.entries(f).map(([t,s])=>({name:t,count:s}))),N(!1)})()},[]),M?e.jsx("div",{className:"text-center p-8",children:"加载能力提升分析数据中..."}):e.jsxs(U.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"能力提升分析仪表盘"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mt-8 border-b-2 border-purple-300 pb-2",children:"知识体系分析"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(n,{title:"知识领域雷达图",icon:C,color:"text-purple-600",children:e.jsx(d,{width:"100%",height:300,children:e.jsxs(Y,{cx:"50%",cy:"50%",outerRadius:"80%",data:o,children:[e.jsx(_,{}),e.jsx(F,{dataKey:"subject",tick:{fontSize:12}}),e.jsx(T,{}),e.jsx($,{name:"知识点数量",dataKey:"count",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6}),e.jsx(m,{})]})})}),e.jsx(n,{title:"知识掌握漏斗",icon:G,color:"text-purple-600",children:e.jsx(d,{width:"100%",height:300,children:e.jsxs(b,{data:x,layout:"vertical",margin:{top:5,right:20,left:20,bottom:5},children:[e.jsx(y,{strokeDasharray:"3 3"}),e.jsx(k,{type:"number"}),e.jsx(D,{type:"category",dataKey:"name",width:60,tick:{fontSize:12}}),e.jsx(m,{}),e.jsx(q,{}),e.jsx(w,{dataKey:"count",name:"知识点数",fill:"#82ca9d"})]})})})]}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mt-8 border-b-2 border-green-300 pb-2",children:"注意力与心流分析"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(n,{title:"专注杀手排行榜",icon:L,color:"text-red-600",children:e.jsx(d,{width:"100%",height:300,children:e.jsxs(b,{data:A,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(y,{strokeDasharray:"3 3"}),e.jsx(k,{dataKey:"name",tick:{fontSize:10},angle:-20,textAnchor:"end",height:60}),e.jsx(D,{}),e.jsx(m,{}),e.jsx(w,{dataKey:"count",name:"干扰次数",fill:"#ef4444"})]})})}),e.jsx(n,{title:"高效专注时段",icon:X,color:"text-green-600",children:e.jsx("div",{className:"h-[300px] flex items-center justify-center text-gray-500",children:e.jsx("p",{children:"热力图模块正在建设中..."})})})]}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mt-8 border-b-2 border-blue-300 pb-2",children:"认知工具箱分析"}),e.jsx(n,{title:"思维模型应用频率",icon:C,color:"text-blue-600",children:e.jsx(d,{width:"100%",height:300,children:e.jsxs(b,{data:v,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(y,{strokeDasharray:"3 3"}),e.jsx(k,{dataKey:"name",tick:{fontSize:10},angle:-20,textAnchor:"end",height:60}),e.jsx(D,{allowDecimals:!1}),e.jsx(m,{}),e.jsx(w,{dataKey:"count",name:"应用次数",fill:"#3b82f6"})]})})})]})};export{ee as default};
